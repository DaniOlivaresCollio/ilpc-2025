sexo=e01,
edad=e02,
e05,
a25,
a26,
a27)# %>%
#sjlabelled::set_na(.,na=c(-999,-888,-777))
# Situación empleo
data <- data %>%
mutate(
a07 = data$a07 %>%
set_labels(label = "Situación de empleo",
labels = c(
"Patrón(a) o empleador(a)" = 1,
"Trabajador(a) por cuenta propia" = 2,
"Empleado(a) u obrero(a) del sector público (Gobierno Central o Municipal)" = 3,
"Empleado(a) u obrero(a) de empresas públicas" = 4,
"Empleado(a) u obrero(a) del sector privado" = 5,
"Servicio doméstico puertas adentro" = 6,
"Servicio doméstico puertas afuera" = 7,
"FF.AA. y del Orden" = 8,
"Familiar no remunerado" = 9)) %>%
as_factor(ref = "labels"))
frq(data$a07)
data <- data %>%
mutate(
sit_empleo = factor(
case_when(
as_numeric(a07) == 1 ~ "Empleador(a)",
as_numeric(a07) == 2 ~ "Autoempleado(a)",
as_numeric(a07) >= 3 ~ "Empleado(a)",
TRUE ~ NA_character_),
levels = c("Empleador(a)","Autoempleado(a)","Empleado(a)")))
frq(data$sit_empleo)
frq(data$b19)
# Sindicatos en empresas
data <- data %>%
mutate(sindicato=case_when(
sit_empleo=='Empleador(a)' | sit_empleo=='Autoempleado(a)' ~ NA
sit_empleo=='Empleado(a)' & b19==1~1,
# Sindicatos en empresas
data <- data %>%
mutate(sindicato=case_when(
sit_empleo=='Empleador(a)' | sit_empleo=='Autoempleado(a)' ~ NA,
sit_empleo=='Empleado(a)' & b19==1~1,
sit_empleo=='Empleado(a)' & b19==2~0,
sit_empleo=='Empleado(a)' & b19==-888 ~0,
sit_empleo=='Empleado(a)' & b19==-999 ~0
))
frq(data$sindicato)
freq(data$b21)
rm(list=ls())
options(scipen = 999)
library(pacman)
p_load(tidyverse,
knitr,
bookdown,
car,
sjmisc,
sjPlot,
sjlabelled,
psych,
kableExtra,
gridExtra,
lubridate,
viridis,
statar,
readxl,
tinytex,
ggrepel,
ggalluvial,
survey,
httr,
readr,
ggplot2,
labelled,
shadowtext,
stringr)
data_raw <- read_excel(here::here("input","data","Fondecyt Prof Pablo Pérez-Conclat, ultima version - 31-03-2025.xlsx"),sheet=3)
data_dec <- read_excel(here::here("input","data","Fondecyt Prof Pablo Pérez-Conclat, ultima version - 31-03-2025.xlsx"),sheet=2)
# Agregar ponderador desde base decodificada
data <- merge(data_raw,data_dec[,c("ID","rake_wb2")],by="ID",all.x=TRUE)
# Selección de variables
data <- data %>%
select(id=ID,
a07,
rake_wb2,
# Var independientes
b19,
b21,
# Var dependientes
c04_01,c04_02,c04_03,c04_04,
c10_01,c10_02,
c11_01,c11_02,c11_03,c11_04,
c08,
# Var mediadoras
b06_01,b06_02,b06_03,b06_04,b06_05,
b11,b12,
# Var control
sexo=e01,
edad=e02,
e05,
a25,
a26,
a27)# %>%
#sjlabelled::set_na(.,na=c(-999,-888,-777))
# Situación empleo
data <- data %>%
mutate(
a07 = data$a07 %>%
set_labels(label = "Situación de empleo",
labels = c(
"Patrón(a) o empleador(a)" = 1,
"Trabajador(a) por cuenta propia" = 2,
"Empleado(a) u obrero(a) del sector público (Gobierno Central o Municipal)" = 3,
"Empleado(a) u obrero(a) de empresas públicas" = 4,
"Empleado(a) u obrero(a) del sector privado" = 5,
"Servicio doméstico puertas adentro" = 6,
"Servicio doméstico puertas afuera" = 7,
"FF.AA. y del Orden" = 8,
"Familiar no remunerado" = 9)) %>%
as_factor(ref = "labels"))
frq(data$a07)
data <- data %>%
mutate(
sit_empleo = factor(
case_when(
as_numeric(a07) == 1 ~ "Empleador(a)",
as_numeric(a07) == 2 ~ "Autoempleado(a)",
as_numeric(a07) >= 3 ~ "Empleado(a)",
TRUE ~ NA_character_),
levels = c("Empleador(a)","Autoempleado(a)","Empleado(a)")))
frq(data$sit_empleo)
frq(data$b19)
# Sindicatos en empresas
data <- data %>%
mutate(sindicato=case_when(
sit_empleo=='Empleador(a)' | sit_empleo=='Autoempleado(a)' ~ NA,
sit_empleo=='Empleado(a)' & b19==1 ~ 1,
sit_empleo=='Empleado(a)' & b19==2~0,
sit_empleo=='Empleado(a)' & b19==-888 ~ 0,
sit_empleo=='Empleado(a)' & b19==-999 ~ 0
))
frq(data$sindicato)
freq(data$b21)
frq(data$b21)
data <- data %>%
mutate(af_sindical=case_when(
sit_empleo=='Empleador(a)' | sit_empleo=='Autoempleado(a)' ~ NA,
sit_empleo=='Empleado(a)' & b21==1 ~ 1,
sit_empleo=='Empleado(a)' & b21==2 ~ 1,
sit_empleo=='Empleado(a)' & b21==3 ~ 0,
sit_empleo=='Empleado(a)' & b21==-888 ~ 0,
sit_empleo=='Empleado(a)' & b21==-999 ~ 0
))
frq(data$af_sindical)
frq(data$b21)
data <- data %>%
mutate(af_sindical=case_when(
sit_empleo=='Empleador(a)' | sit_empleo=='Autoempleado(a)' ~ NA,
sit_empleo=='Empleado(a)' & b21==1 ~ 1,
sit_empleo=='Empleado(a)' & b21==2 ~ 1,
sit_empleo=='Empleado(a)' & b21==3 ~ 0,
sit_empleo=='Empleado(a)' & b21==-888 ~ 0,
sit_empleo=='Empleado(a)' & b21==-999 ~ 0,
sindicato==0 ~ 0
))
frq(data$af_sindical)
frq(data$c08)
frq(data$c08)
data$pol_id <- car::recode(data$c08,
recodes=c("c(11,12,-888,-999)='No se identifica';
c(0,1,2,3,4)='Izquierda';
c(5)='Centro';
c(6,7,8,9,10)='Derecha'"),
as.factor=TRUE,
levels=c('Izquierda',
'Centro',
'Derecha',
'No se identifica'))
frq(data$pol_id)
frq(data$b21)
# Afiliación sindical
data <- data %>%
mutate(af_sindical = if_else(b21==1|b21==2,1,0))
data <- data %>%
mutate(af_sindical=case_when(
sit_empleo=='Empleador(a)' | sit_empleo=='Autoempleado(a)' ~ NA,
sit_empleo=='Empleado(a)' & b21==1 ~ 1,
sit_empleo=='Empleado(a)' & b21==2 ~ 1,
sit_empleo=='Empleado(a)' & b21==3 ~ 0,
sit_empleo=='Empleado(a)' & b21==-888 ~ 0,
sit_empleo=='Empleado(a)' & b21==-999 ~ 0,
sindicato==0 ~ 0
))
frq(data$af_sindical)
frq(data$c04_01)
rm(list=ls())
options(scipen = 999)
library(pacman)
p_load(tidyverse,
knitr,
bookdown,
car,
sjmisc,
sjPlot,
sjlabelled,
psych,
kableExtra,
gridExtra,
lubridate,
viridis,
statar,
readxl,
tinytex,
ggrepel,
ggalluvial,
survey,
httr,
readr,
ggplot2,
labelled,
shadowtext,
stringr)
data_raw <- read_excel(here::here("input","data","Fondecyt Prof Pablo Pérez-Conclat, ultima version - 31-03-2025.xlsx"),sheet=3)
data_dec <- read_excel(here::here("input","data","Fondecyt Prof Pablo Pérez-Conclat, ultima version - 31-03-2025.xlsx"),sheet=2)
# Agregar ponderador desde base decodificada
data <- merge(data_raw,data_dec[,c("ID","rake_wb2")],by="ID",all.x=TRUE)
# Selección de variables
data <- data %>%
select(id=ID,
a07,
rake_wb2,
# Var independientes
b19,
b21,
# Var dependientes
c04_01,c04_02,c04_03,c04_04,
c10_01,c10_02,
c11_01,c11_02,c11_03,c11_04,
c08,
# Var mediadoras
b06_01,b06_02,b06_03,b06_04,b06_05,
b11,b12,
# Var control
sexo=e01,
edad=e02,
e05,
a25,
a26,
a27)# %>%
#sjlabelled::set_na(.,na=c(-999,-888,-777))
# Situación empleo
data <- data %>%
mutate(
a07 = data$a07 %>%
set_labels(label = "Situación de empleo",
labels = c(
"Patrón(a) o empleador(a)" = 1,
"Trabajador(a) por cuenta propia" = 2,
"Empleado(a) u obrero(a) del sector público (Gobierno Central o Municipal)" = 3,
"Empleado(a) u obrero(a) de empresas públicas" = 4,
"Empleado(a) u obrero(a) del sector privado" = 5,
"Servicio doméstico puertas adentro" = 6,
"Servicio doméstico puertas afuera" = 7,
"FF.AA. y del Orden" = 8,
"Familiar no remunerado" = 9)) %>%
as_factor(ref = "labels"))
frq(data$a07)
data <- data %>%
mutate(
sit_empleo = factor(
case_when(
as_numeric(a07) == 1 ~ "Empleador(a)",
as_numeric(a07) == 2 ~ "Autoempleado(a)",
as_numeric(a07) >= 3 ~ "Empleado(a)",
TRUE ~ NA_character_),
levels = c("Empleador(a)","Autoempleado(a)","Empleado(a)")))
frq(data$sit_empleo)
frq(data$b19)
# Sindicatos en empresas
data <- data %>%
mutate(sindicato=case_when(
sit_empleo=='Empleador(a)' | sit_empleo=='Autoempleado(a)' ~ NA,
sit_empleo=='Empleado(a)' & b19==1 ~ 1,
sit_empleo=='Empleado(a)' & b19==2 ~ 0,
sit_empleo=='Empleado(a)' & b19==-888 ~ 0,
sit_empleo=='Empleado(a)' & b19==-999 ~ 0
))
frq(data$sindicato)
frq(data$b21)
# Afiliación sindical
data <- data %>%
mutate(af_sindical = if_else(b21==1|b21==2,1,0))
data <- data %>%
mutate(af_sindical=case_when(
sit_empleo=='Empleador(a)' | sit_empleo=='Autoempleado(a)' ~ NA,
sit_empleo=='Empleado(a)' & b21==1 ~ 1,
sit_empleo=='Empleado(a)' & b21==2 ~ 1,
sit_empleo=='Empleado(a)' & b21==3 ~ 0,
sit_empleo=='Empleado(a)' & b21==-888 ~ 0,
sit_empleo=='Empleado(a)' & b21==-999 ~ 0,
sindicato==0 ~ 0
))
frq(data$af_sindical)
frq(data$c04_01)
frq(data$b19)
# Sindicatos en empresas
data <- data %>%
mutate(sindicato=case_when(
sit_empleo %in% c("Empleador(a)", "Autoempleado(a)") ~ NA_real_,
sit_empleo=='Empleado(a)' & b19 == 1 ~ 1,
sit_empleo=='Empleado(a)' & b19 %in% c(2, -888, -999) ~ 0
))
frq(data$sindicato)
frq(data$b21)
# Afiliación sindical
data <- data %>%
mutate(af_sindical=case_when(
sit_empleo %in% c("Empleador(a)", "Autoempleado(a)") ~ NA_real_,
sit_empleo == 'Empleado(a)' & b21 %in% c(1, 2) ~ 1,
sit_empleo == 'Empleado(a)' & b21 %in% c(3, -888, -999) ~ 0,
sindicato==0 ~ 0
))
frq(data$af_sindical)
rm(list=ls())
options(scipen = 999)
library(pacman)
p_load(tidyverse,
knitr,
bookdown,
car,
sjmisc,
sjPlot,
sjlabelled,
psych,
kableExtra,
gridExtra,
lubridate,
viridis,
statar,
readxl,
tinytex,
ggrepel,
ggalluvial,
survey,
httr,
readr,
ggplot2,
labelled,
shadowtext,
stringr)
data_raw <- read_excel(here::here("input","data","Fondecyt Prof Pablo Pérez-Conclat, ultima version - 31-03-2025.xlsx"),sheet=3)
data_dec <- read_excel(here::here("input","data","Fondecyt Prof Pablo Pérez-Conclat, ultima version - 31-03-2025.xlsx"),sheet=2)
# Agregar ponderador desde base decodificada
data <- merge(data_raw,data_dec[,c("ID","rake_wb2")],by="ID",all.x=TRUE)
# Selección de variables
data <- data %>%
select(id=ID,
a07,
rake_wb2,
# Var independientes
b19,
b21,
# Var dependientes
c04_01,c04_02,c04_03,c04_04,
c10_01,c10_02,
c11_01,c11_02,c11_03,c11_04,
c08,
# Var mediadoras
b06_01,b06_02,b06_03,b06_04,b06_05,
b11,b12,
# Var control
sexo=e01,
edad=e02,
e05,
a25,
a26,
a27)# %>%
#sjlabelled::set_na(.,na=c(-999,-888,-777))
# Situación empleo
data <- data %>%
mutate(
a07 = data$a07 %>%
set_labels(label = "Situación de empleo",
labels = c(
"Patrón(a) o empleador(a)" = 1,
"Trabajador(a) por cuenta propia" = 2,
"Empleado(a) u obrero(a) del sector público (Gobierno Central o Municipal)" = 3,
"Empleado(a) u obrero(a) de empresas públicas" = 4,
"Empleado(a) u obrero(a) del sector privado" = 5,
"Servicio doméstico puertas adentro" = 6,
"Servicio doméstico puertas afuera" = 7,
"FF.AA. y del Orden" = 8,
"Familiar no remunerado" = 9)) %>%
as_factor(ref = "labels"))
frq(data$a07)
data <- data %>%
mutate(
sit_empleo = factor(
case_when(
as_numeric(a07) == 1 ~ "Empleador(a)",
as_numeric(a07) == 2 ~ "Autoempleado(a)",
as_numeric(a07) >= 3 ~ "Empleado(a)",
TRUE ~ NA_character_),
levels = c("Empleador(a)","Autoempleado(a)","Empleado(a)")))
frq(data$sit_empleo)
frq(data$b19)
# Sindicatos en empresas
data <- data %>%
mutate(sindicato=case_when(
sit_empleo %in% c("Empleador(a)", "Autoempleado(a)") ~ NA_real_,
sit_empleo == 'Empleado(a)' & b19 == 1 ~ 1,
sit_empleo == 'Empleado(a)' & b19 %in% c(2, -888, -999) ~ 0
))
frq(data$sindicato)
frq(data$b21)
# Afiliación sindical
data <- data %>%
mutate(af_sindical=case_when(
sit_empleo %in% c("Empleador(a)", "Autoempleado(a)") ~ NA_real_,
sit_empleo == 'Empleado(a)' & b21 %in% c(1, 2) ~ 1,
sit_empleo == 'Empleado(a)' & b21 %in% c(3, -888, -999) ~ 0,
sindicato == 0 ~ 0
))
frq(data$af_sindical)
frq(data$c04_01)
1924+68+121
# Frecuencia participación: Firmar carta o petición
data <- data %>%
mutate(part_firma=case_when(
c04_01 %in% c(2, 3, 4, 5) ~ 1,
c04_01 %in% c(1, -888, -999) ~ 0
))
frq(data$part_firma)
frq(data$c04_02)
1917+39+42
# Frecuencia participación: Asistir a manifestaciones
data <- data %>%
mutate(part_manifest=case_when(
c04_02 %in% c(2, 3, 4, 5) ~ 1,
c04_02 %in% c(1, -888, -999) ~ 0
))
frq(data$part_manifest)
frq(data$c04_03)
2208+36+27
# Frecuencia participación: Participar en huelgas
data <- data %>%
mutate(part_huelga=case_when(
c04_03 %in% c(2, 3, 4, 5) ~ 1,
c04_03 %in% c(1, -888, -999) ~ 0
))
frq(data$part_huelga)
frq(data$c04_04)
1784+53+23
# Frecuencia participación: Opinar por rrss
data <- data %>%
mutate(part_opinion=case_when(
c04_04 %in% c(2, 3, 4, 5) ~ 1,
c04_04 %in% c(1, -888, -999) ~ 0
))
frq(data$part_opinion)
frq(c10_01)
frq(data$c10_01)
q
frq(data$c10_01)
1097+49+74
data <- data %>%
mutate(pol_habla=case_when(
c10_01 %in% c(2, 3, 4, 5) ~ 1,
c10_01 %in% c(1, -888, -999) ~ 0
))
frq(data$pol_habla)
frq(data$c10_02)
1471+39+35
data <- data %>%
mutate(pol_habla=case_when(
c10_02 %in% c(2, 3, 4, 5) ~ 1,
c10_02 %in% c(1, -888, -999) ~ 0
))
frq(data$pol_convence)
data <- data %>%
mutate(pol_convence=case_when(
c10_02 %in% c(2, 3, 4, 5) ~ 1,
c10_02 %in% c(1, -888, -999) ~ 0
))
frq(data$pol_convence)
frq(data$c08)
data$pol_id <- car::recode(data$c08,
recodes=c("c(11,12,-888,-999)='No se identifica';
c(0,1,2,3,4)='Izquierda';
c(5)='Centro';
c(6,7,8,9,10)='Derecha'"),
as.factor=TRUE,
levels=c('Izquierda',
'Centro',
'Derecha',
'No se identifica'))
frq(data$pol_id)
90+669+65+52
colSums(is.na(data))
frq(data$c04_02)
frq(data$b06_01)
frq(data$b06_02)
frq(data$b06_03)
frq(data$b06_04)
frq(data$b06_05)
data <- data %>%
rowwise() %>%
mutate(autonomia_control = mean(c(b06_01, b06_02, b06_03, b06_04, b06_05))) %>%
ungroup()
descr(data$autonomia_control)
