edad=e02,
nedu=e05,
a25,
a26,
a27)%>%
sjlabelled::set_na(.,na=c(-999,-888,-777))
View(data_raw)
View(data_dec)
data <- merge(data_raw,data_dec[,c("ID","rake_wb2")],by="ID",all.x=TRUE)
data <- data_raw %>%
select(id=ID,
a07,
rake_wb2,
# Var independientes
b19,
b21,
# Var dependientes
c04_01,c04_02,c04_03,c04_04,
c10_01,c10_02,
c11_01,c11_02,c11_03,c11_04,
c08,
# Var mediadoras
b06_01,b06_02,b06_03,b06_04,b06_05,
b11,b12,
# Var control
sexo=e01,
edad=e02,
nedu=e05,
a25,
a26,
a27)%>%
sjlabelled::set_na(.,na=c(-999,-888,-777))
data <- merge(data_raw,data_dec[,c("ID","rake_wb2")],by="ID",all.x=TRUE)
View(data)
data <- data %>%
select(id=ID,
a07,
rake_wb2,
# Var independientes
b19,
b21,
# Var dependientes
c04_01,c04_02,c04_03,c04_04,
c10_01,c10_02,
c11_01,c11_02,c11_03,c11_04,
c08,
# Var mediadoras
b06_01,b06_02,b06_03,b06_04,b06_05,
b11,b12,
# Var control
sexo=e01,
edad=e02,
nedu=e05,
a25,
a26,
a27)%>%
sjlabelled::set_na(.,na=c(-999,-888,-777))
# Situación empleo
frq(data$a07)
# Agregar ponderador de base decodificada
data <- merge(data_raw,data_dec[,c("ID","rake_wb2")],by="ID",all.x=TRUE)
data <- data %>%
select(id=ID,
sit_empleo=a07,
rake_wb2,
# Var independientes
b19,
b21,
# Var dependientes
c04_01,c04_02,c04_03,c04_04,
c10_01,c10_02,
c11_01,c11_02,c11_03,c11_04,
c08,
# Var mediadoras
b06_01,b06_02,b06_03,b06_04,b06_05,
b11,b12,
# Var control
sexo=e01,
edad=e02,
nedu=e05,
a25,
a26,
a27)%>%
sjlabelled::set_na(.,na=c(-999,-888,-777))
# Situación empleo
class(data$sit_empleo)
data$sit_empleo <- set_labels(data$sit_empleo,labels=c("Patrón(a) o empleador(a)"=1,
"Trabajador(a) por cuenta propia"=2,
"Empleado(a) u obrero(a) del sector público (Gobierno Central o Municipal)"=3,
"Empleado(a) u obrero(a) de empresas públicas"=4,
"Empleado(a) u obrero(a) del sector privado"=5,
"Servicio doméstico puertas adentro"=6,
"Servicio doméstico puertas afuera"=7,
"FF.AA. y del Orden"=8,
"Familiar no remunerado"=9))
frq(data$sit_empleo)
# Agregar ponderador de base decodificada
data <- merge(data_raw,data_dec[,c("ID","rake_wb2")],by="ID",all.x=TRUE)
data <- data %>%
select(id=ID,
a07,
rake_wb2,
# Var independientes
b19,
b21,
# Var dependientes
c04_01,c04_02,c04_03,c04_04,
c10_01,c10_02,
c11_01,c11_02,c11_03,c11_04,
c08,
# Var mediadoras
b06_01,b06_02,b06_03,b06_04,b06_05,
b11,b12,
# Var control
sexo=e01,
edad=e02,
nedu=e05,
a25,
a26,
a27)%>%
sjlabelled::set_na(.,na=c(-999,-888,-777))
# Situación empleo
class(data$a07)
data$a07 <- set_labels(data$a07,labels=c("Patrón(a) o empleador(a)"=1,
"Trabajador(a) por cuenta propia"=2,
"Empleado(a) u obrero(a) del sector público (Gobierno Central o Municipal)"=3,
"Empleado(a) u obrero(a) de empresas públicas"=4,
"Empleado(a) u obrero(a) del sector privado"=5,
"Servicio doméstico puertas adentro"=6,
"Servicio doméstico puertas afuera"=7,
"FF.AA. y del Orden"=8,
"Familiar no remunerado"=9))
# Situación empleo
class(data$a07)
frq(data$sa07)
frq(data$a07)
# Situación empleo
class(data$a07)
data$a07 <- set_labels(data$a07,
label="Situación de empleo",
labels=c("Patrón(a) o empleador(a)"=1,
"Trabajador(a) por cuenta propia"=2,
"Empleado(a) u obrero(a) del sector público (Gobierno Central o Municipal)"=3,
"Empleado(a) u obrero(a) de empresas públicas"=4,
"Empleado(a) u obrero(a) del sector privado"=5,
"Servicio doméstico puertas adentro"=6,
"Servicio doméstico puertas afuera"=7,
"FF.AA. y del Orden"=8,
"Familiar no remunerado"=9))
frq(data$a07)
tab_xtab(data$a07)
# Situación empleo
class(data$a07)
data <- data %>%
mutate(
a07 = data$a07 %>%
set_labels(label = "Situación de empleo",
labels = c(
"Patrón(a) o empleador(a)" = 1,
"Trabajador(a) por cuenta propia" = 2,
"Empleado(a) u obrero(a) del sector público (Gobierno Central o Municipal)" = 3,
"Empleado(a) u obrero(a) de empresas públicas" = 4,
"Empleado(a) u obrero(a) del sector privado" = 5,
"Servicio doméstico puertas adentro" = 6,
"Servicio doméstico puertas afuera" = 7,
"FF.AA. y del Orden" = 8,
"Familiar no remunerado" = 9)) %>%
as_factor(ref = "labels"))
# Situación empleo
class(data$a07)
frq(data$a07)
table(data$a07)
data <- data %>%
mutate(
sit_empleo = case_when(a07==1~"Empleador(a)",
a07==2~"Autoempleado(a)",
a07>=3~"Empleado(a)")
)
frq(data$sit_empleo)
class(data$sit_empleo)
data <- data %>%
mutate(
sit_empleo = case_when(a07==1~"Empleador(a)",
a07==2~"Autoempleado(a)",
a07>=3~"Empleado(a)")) %>%
as_factor()
frq(data$sit_empleo)
class(data$a07)
table(data$a07)
data <- data %>%
mutate(
sit_empleo = case_when(a07==1~"Empleador(a)",
a07==2~"Autoempleado(a)",
a07==3~"Empleado(a)")) %>%
as_factor()
frq(data$sit_empleo)
data <- data %>%
mutate(
sit_empleo = case_when(a07==1~"Empleador(a)",
a07==2~"Autoempleado(a)",
a07>=3~"Empleado(a)")) %>%
as_factor()
frq(data$sit_empleo)
data <- data %>%
mutate(
sit_empleo = case_when(
as_numeric(a07) == 1 ~ "Empleador(a)",
as_numeric(a07) == 2 ~ "Autoempleado(a)",
as_numeric(a07) >= 3 ~ "Empleado(a)",
TRUE ~ NA_character_
),
sit_empleo = as_factor(sit_empleo)
)
frq(data$sit_empleo)
data <- data %>%
mutate(
sit_empleo = factor(
case_when(
as_numeric(a07) == 1 ~ "Empleador(a)",
as_numeric(a07) == 2 ~ "Autoempleado(a)",
as_numeric(a07) >= 3 ~ "Empleado(a)",
TRUE ~ NA_character_),
levels = c("Empleador(a)","Autoempleado(a)","Empleado(a)")))
frq(data$sit_empleo)
getwd()
file.exists("input/data/Fondecyt Prof Pablo Pérez-Conclat, ultima version - 31-03-2025.xlsx")
# Sindicatos en empresas
data <- data %>%
mutate(sindicato=if_else(b19==1,1,0))
frq(data$sindicato)
class(data$sindicato)
rm(list=ls())
options(scipen = 999)
library(pacman)
p_load(tidyverse,
knitr,
bookdown,
car,
sjmisc,
sjPlot,
sjlabelled,
psych,
kableExtra,
gridExtra,
lubridate,
viridis,
statar,
readxl,
tinytex,
ggrepel,
ggalluvial,
survey,
httr,
readr,
ggplot2,
labelled,
shadowtext,
stringr)
data_raw <- read_excel(here::here("input","data","Fondecyt Prof Pablo Pérez-Conclat, ultima version - 31-03-2025.xlsx"),sheet=3)
data_dec <- read_excel(here::here("input","data","Fondecyt Prof Pablo Pérez-Conclat, ultima version - 31-03-2025.xlsx"),sheet=2)
# Agregar ponderador desde base decodificada
data <- merge(data_raw,data_dec[,c("ID","rake_wb2")],by="ID",all.x=TRUE)
# Selección de variables
data <- data %>%
select(id=ID,
a07,
rake_wb2,
# Var independientes
b19,
b21,
# Var dependientes
c04_01,c04_02,c04_03,c04_04,
c10_01,c10_02,
c11_01,c11_02,c11_03,c11_04,
c08,
# Var mediadoras
b06_01,b06_02,b06_03,b06_04,b06_05,
b11,b12,
# Var control
sexo=e01,
edad=e02,
e05,
a25,
a26,
a27)%>%
sjlabelled::set_na(.,na=c(-999,-888,-777))
# Situación empleo
data <- data %>%
mutate(
a07 = data$a07 %>%
set_labels(label = "Situación de empleo",
labels = c(
"Patrón(a) o empleador(a)" = 1,
"Trabajador(a) por cuenta propia" = 2,
"Empleado(a) u obrero(a) del sector público (Gobierno Central o Municipal)" = 3,
"Empleado(a) u obrero(a) de empresas públicas" = 4,
"Empleado(a) u obrero(a) del sector privado" = 5,
"Servicio doméstico puertas adentro" = 6,
"Servicio doméstico puertas afuera" = 7,
"FF.AA. y del Orden" = 8,
"Familiar no remunerado" = 9)) %>%
as_factor(ref = "labels"))
frq(data$a07)
data <- data %>%
mutate(
sit_empleo = factor(
case_when(
as_numeric(a07) == 1 ~ "Empleador(a)",
as_numeric(a07) == 2 ~ "Autoempleado(a)",
as_numeric(a07) >= 3 ~ "Empleado(a)",
TRUE ~ NA_character_),
levels = c("Empleador(a)","Autoempleado(a)","Empleado(a)")))
frq(data$sit_empleo)
# Sindicatos en empresas
data <- data %>%
mutate(sindicato=if_else(b19==1,1,0))
frq(data$sindicato)
# Afiliación sindical
data <- data %>%
mutate(af_sindical = if_else(b21==1|b21==2,1,0))
frq(data$af_sindical)
frq(data$af_sindical)
data <- data %>%
mutate(part_firma=if_else(c04_01==1,0,1))
frq(data$part_firma)
data <- data %>%
mutate(part_manifest=if_else(c04_01==1,0,1))
frq(data$part_manifest)
data <- data %>%
mutate(part_manifest=if_else(c04_02==1,0,1))
frq(data$part_manifest)
data <- data %>%
mutate(part_huelga=if_else(c04_03==1,0,1))
frq(data$part_huelga)
data <- data %>%
mutate(part_opinion=if_else(c04_04==1,0,1))
frq(data$part_opinion)
data <- data %>%
mutate(pol_habla=if_else(c10_01==1,0,1))
frq(data$pol_habla)
frq(data$c10_01)
frq(data$pol_habla)
data <- data %>%
mutate(pol_convence=if_else(c10_02==1,0,1))
frq(data$c10_02)
# Recodficar
data$pol_id <- car::recode(data$c08,
recodes=c("c(11,12,-888,-999)='No se identifica';
c(0,1,2,3,4)='Izquierda';
c(5)='Centro';
c(6,7,8,9,10)='Derecha'"),
as.factor=TRUE,
levels=c('Izquierda',
'Centro',
'Derecha',
'No se identifica'))
frq(data$pol_id)
data <- data %>%
rowwise() %>%
mutate(autonomia_control = mean(c(b06_01, b06_02, b06_03, b06_04, b06_05))) %>%
ungroup()
rm(list=ls())
options(scipen = 999)
library(pacman)
p_load(tidyverse,
knitr,
bookdown,
car,
sjmisc,
sjPlot,
sjlabelled,
psych,
kableExtra,
gridExtra,
lubridate,
viridis,
statar,
readxl,
tinytex,
ggrepel,
ggalluvial,
survey,
httr,
readr,
ggplot2,
labelled,
shadowtext,
stringr)
data_raw <- read_excel(here::here("input","data","Fondecyt Prof Pablo Pérez-Conclat, ultima version - 31-03-2025.xlsx"),sheet=3)
data_dec <- read_excel(here::here("input","data","Fondecyt Prof Pablo Pérez-Conclat, ultima version - 31-03-2025.xlsx"),sheet=2)
# Agregar ponderador desde base decodificada
data <- merge(data_raw,data_dec[,c("ID","rake_wb2")],by="ID",all.x=TRUE)
# Selección de variables
data <- data %>%
select(id=ID,
a07,
rake_wb2,
# Var independientes
b19,
b21,
# Var dependientes
c04_01,c04_02,c04_03,c04_04,
c10_01,c10_02,
c11_01,c11_02,c11_03,c11_04,
c08,
# Var mediadoras
b06_01,b06_02,b06_03,b06_04,b06_05,
b11,b12,
# Var control
sexo=e01,
edad=e02,
e05,
a25,
a26,
a27) %>%
sjlabelled::set_na(.,na=c(-999,-888,-777))
# Situación empleo
data <- data %>%
mutate(
a07 = data$a07 %>%
set_labels(label = "Situación de empleo",
labels = c(
"Patrón(a) o empleador(a)" = 1,
"Trabajador(a) por cuenta propia" = 2,
"Empleado(a) u obrero(a) del sector público (Gobierno Central o Municipal)" = 3,
"Empleado(a) u obrero(a) de empresas públicas" = 4,
"Empleado(a) u obrero(a) del sector privado" = 5,
"Servicio doméstico puertas adentro" = 6,
"Servicio doméstico puertas afuera" = 7,
"FF.AA. y del Orden" = 8,
"Familiar no remunerado" = 9)) %>%
as_factor(ref = "labels"))
frq(data$a07)
data <- data %>%
mutate(
sit_empleo = factor(
case_when(
as_numeric(a07) == 1 ~ "Empleador(a)",
as_numeric(a07) == 2 ~ "Autoempleado(a)",
as_numeric(a07) >= 3 ~ "Empleado(a)",
TRUE ~ NA_character_),
levels = c("Empleador(a)","Autoempleado(a)","Empleado(a)")))
frq(data$sit_empleo)
# Sindicatos en empresas
data <- data %>%
mutate(sindicato=if_else(b19==1,1,0))
frq(data$sindicato)
# Afiliación sindical
data <- data %>%
mutate(af_sindical = if_else(b21==1|b21==2,1,0))
frq(data$af_sindical)
# Frecuencia participación: Firmar carta o petición
data <- data %>%
mutate(part_firma=if_else(c04_01==1,0,1))
frq(data$part_firma)
# Frecuencia participación: Asistir a manifestaciones
data <- data %>%
mutate(part_manifest=if_else(c04_02==1,0,1))
frq(data$part_manifest)
# Frecuencia participación: Participar en huelgas
data <- data %>%
mutate(part_huelga=if_else(c04_03==1,0,1))
frq(data$part_huelga)
# Frecuencia participación: Opinar por rrss
data <- data %>%
mutate(part_opinion=if_else(c04_04==1,0,1))
frq(data$part_opinion)
data <- data %>%
mutate(pol_habla=if_else(c10_01==1,0,1))
frq(data$c10_01)
frq(data$pol_habla)
data <- data %>%
mutate(pol_convence=if_else(c10_02==1,0,1))
frq(data$c10_02)
frq(data$pol_convence)
# Recodficar
data$pol_id <- car::recode(data$c08,
recodes=c("c(11,12,-888,-999)='No se identifica';
c(0,1,2,3,4)='Izquierda';
c(5)='Centro';
c(6,7,8,9,10)='Derecha'"),
as.factor=TRUE,
levels=c('Izquierda',
'Centro',
'Derecha',
'No se identifica'))
frq(data$pol_id)
data <- data %>%
rowwise() %>%
mutate(autonomia_control = mean(c(b06_01, b06_02, b06_03, b06_04, b06_05))) %>%
ungroup()
frq(data$autonomia_control)
descr(data$autonomia_control)
colSums(is.na(data))
frq(data$b11)
data <- data %>%
mutate(
influye_trabajo = case_when(
b11==2 ~ 0,
b12==1 ~ 1,
b12==2 ~ 2,
))
data <- data %>%
mutate(
influye_trabajo = case_when(
b11==2 ~ 0,
b12==1 ~ 1,
b12==2 ~ 2,
b12==3 ~ 3,
b12==4 ~ 4,
b12==5 ~ 5))
frq(data$influye_trabajo)
